---
marp: true
---

# Rパッケージ開発入門

## 第13章：GitとGitHub

担当：福井

---

# Git・GitHubとは

## GitとGitHubをつかったパッケージ管理は便利

- Git：バージョン管理システムの一つ
  - コードの変更が追跡可能
- GitHub：コードを共有するwebサービス
  - pull requestで改善案を申請し、課題を管理可能

---

# Git/GitHubをつかって開発したパッケージを利用する

## GitHubを使えば以下の方法で誰でもRパッケージを利用（インストール）できる
  
```
install.package("devtools")
devtools::install_github("ichimomo/frasyr") 
# (""のなかは、GitHubのusername/package名)
```
- GitHubのパッケージのサイトでコードを読むこともできるしMarkdown形式で書かれたドキュメントを参照できる
- issueをつかってバグレポートできる

---

# 13.1 RstudioとGit、GitHub

## Consoleだけじゃなくて、Treminalでも操作してみて

- ちょっとだけLinuxのterminal操作（シェルコマンド）を知っておくと良い
- 例えば
  - pwd （カレントディレクトリの表示）
  - cd　（ディレクトリの移動）
  - ls　（カレントディレクトリ下のファイル表示）
  - mv　（ファイルの移動）
  - cp　（ファイルのコピー）
  - rm　（ファイルの削除；**危険!!**）
  - touch（ファイル作成）
  - mkdir （ディレクトリの作成）

---

# 13.2 初期設定

## スキップして大丈夫っぽい
1. Gitインストール（全員完了したものとする）
2. Gitユーザー名とメールアカウント設定（全員完了したものとする）
3. GitHubアカウント作成（全員完了したものとする）
4. SSH鍵作成　（やらないと通信で毎回パスワード聞かれる）
- 鍵があるかどうかは以下のコマンドで確認可能
```
file.exists("~.ssh/id_rsa.pub")
```

----

# 13.3 ローカルのGitリポジトリ作成

## パッケージ開発でGitHubを使うためローカルリポジトリを作成
（作成すると.gitが作成される）

作成するには以下のいずれかを実行

1. Rstudioでプロジェクトオプションを表示、Git/SVNパネルを確認。バージョン管理システムの項目をNoneからGitへ変更
2. Terminal でgit init を実行してRstudioを再起動

Gitを初期化した後はRstudioのEnviromnent/History/Connections/BuildのタブにGitが追加される

Toolsにもいろいろメニューが追加される

---

# 13.4 変更点を見る

## Gitを使うとRのスクリプトでも変更履歴を見れるのがよい

アイコンでもどんな変更があったかが確認できる

- Modified
- Untracked
- Deleted

- Diffをクリックすると「diff」を使って差分がわかる

  -背景色が緑なものが追加された部分
  -赤が削除された部分
  
---

# 13.5 変更を記録する

## コミットについて

---

# 13.6 コミットへのベストプラクティス

## **最小限**で**安全**

- 最小限

  -1つのコミットは1つの問題に関する変更（いろんな問題をいっぺんに解決しない）
  
  -新しい問題が出てきたらコミットを分ける（issueを立てる）
- 安全

  -1つのコミットは解決したい問題に対して解決しきる（中途半端にしない）
  
  -実装が正しいと検証するためのテストも用意

## コミットメッセージは以下推奨

-簡潔であり、示唆に富む

-変更内容ではなく、理由を説明

---

# 13.7　ファイル無視


---

# 13.8　間違いの取り消し

---

# 13.9　GitHubとの同期

---

# 13.10　GitHub利用のメリット

---

# 13.11　共同作業

---

# 13.12　issue


---

# 13.13　branch

---

# 13.14　pull request作成

---

# 13.15　pull requestを送る

---

# 13.16　pull request（をレビューしてから）の承認

---

